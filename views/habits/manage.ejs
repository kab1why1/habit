<h2>Manage My Habits</h2>

<% const habits = (locals && locals.habits) ? locals.habits : []; %>

<% if (habits.length === 0) { %>
  <p>No habits found. <a href="/habits/new">Create your first habit</a></p>
<% } else { %>
  <ul class="habit-manage-list">
    <% habits.forEach(h => { 
         const color = h.color || '#5b4ef5';
         const category = h.category || 'General';
    %>
      <li>
        <a href="/habits/<%= h.id %>"><strong><%= h.title %></strong></a>
        - <em><%= category %></em>
        - <form action="/habits/<%= h.id %>/toggle" method="POST" style="display:inline">
            <button class="btn tiny-btn" type="submit"><%= h.completed ? 'Undo' : 'Done' %></button>
          </form>
        <a href="/habits/<%= h.id %>/edit" class="btn tiny-btn">Edit</a>
        <form action="/habits/<%= h.id %>/delete" method="POST" style="display:inline">
          <button class="btn tiny-btn delete-btn" type="submit">Delete</button>
        </form>
      </li>
    <% }) %>
  </ul>
<% } %>

<div style="margin-top:16px;">
  <a href="/habits/new" class="btn btn-primary">+ Create New Habit</a>
</div>
